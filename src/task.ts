/* Средняя температура по больнице

--- Дано ---
Дан объект, представляющий больницу.
Больница имеет имя и список палат.
Каждая палата имеет имя и список пациентов.
Каждый пациент имеет имя и температуру тела.

--- Задание ---
Необходимо вывести объект, в котором будет краткая агрегированная сводка по больнице:
* Название больницы
* Средняя температура по всей больнице
* Список пациентов, отсортированный по убыванию температуры, вместе с этими данными:
  * Температура пациента
  * Номер палаты
  * Имя пациента
* Список палат, отсортированный по убыванию средней температуры, вместе с этими данными:
  * Номер палаты
  * Средняя температура в палате

--- Единицы измерения температуры ---
В этой больнице есть одна интересная особенность - пациенты относятся к разным категориям:
* Европейцы
* Американцы
* Физики

Каждая категория людей измеряет температуру в себе привычных единицах:
* Градусы цельсия (Европейцы)
* Градусы фаренгейта (Американцы)
* Кельвины (Физики)

Вам же в отчёте необходимо предоставить информацию в градусах Цельсия!

--- Требования ---
Должна быть решена "проблема плавающей точки", все результаты должны быть обрезаны до третьей точки после запятой.
Например, вместо "36.97500000000001" должен быть результат "36.975".
При этом результат быть number, а не string!

--- Ограничения ---
Гарантируется, что у значений температуры могут быть только адекватные значения
Никаких пациентов с температурами  -1C, +10C или +55C быть не может!

--- Рекомендации ---
Не пытайтесь всё лепить в один цикл / функцию / тип / дженерик и так далее.
Создавайте столько типов и функций, сколько вы считаете нужным, чтобы код был читаемым и понятным.

Моё решение заняло 109 строк, 5 вспомогательных функций и 3 дополнительных типа.
Для этого пригодились всего лишь 2 reduce, 2 switch и 2 if конструкции.

Однако, вы не обязаны использовать именно эти инструменты.

--- Как проверить правильно ---
Внизу кода есть блок try-catch с проверкой, что реальный результат совпадает с ожидаемым.
Если всё хорошо, вы увидите зелёную надпись.
Если что-то не совпадает с ожидаемым ответ - красную надпись.
 */

import { Hospital } from './task.types';

export const hospital: Hospital = {
  name: 'City General Hospital',
  // Avg 37.0425C
  rooms: [
    {
      name: 'A-123',
      patients: [
        // Avg 37C
        { name: 'Alice Johnson', temperature: 36.8 }, // 36.8C
        { name: 'Bob Smith', temperature: 98.96 }, // 98.96F | 37.2C
      ],
    },
    {
      name: 'B-456',
      patients: [
        // Avg 37.07C
        { name: 'Charlie Brown', temperature: 309.65 }, // 309.65K | 36.5C
        { name: 'David Lee', temperature: 37.81 }, // 37.81C
        { name: 'Eve Miller', temperature: 98.42 }, // 98.42F | 36.9C
      ],
    },
    {
      name: 'C-789',
      patients: [
        // Avg 37.1C
        { name: 'Frank Wilson', temperature: 310.25 }, // 310.25K | 37.1C
      ],
    },
    {
      name: 'D-246',
      patients: [
        // Avg 37C
        { name: 'Grace Davis', temperature: 309.75 }, // 309.75K | 36.6C
        { name: 'Henry Jones', temperature: 37.3 }, // 37.3C
        { name: 'Ivy Williams', temperature: 98.06 }, // 98.06F | 36.7C
        { name: 'Jack Thompson', temperature: 99.32 }, // 99.32F | 37.4C
      ],
    },
  ],
};
